name: 🔄 Manual Repository Update

on:
  workflow_dispatch: # 手动触发工作流

jobs:
  update-repo:
    runs-on: ubuntu-latest

    steps:
    # 检出当前仓库代码
    - name: 🔄 Checkout My Repository
      uses: actions/checkout@v3

    # 添加目标仓库为远程仓库
    - name: 🔄 Add Target Repository as Remote
      run: |
        git remote add upstream https://github.com/samqin123/MoonTV.git
        git fetch upstream
        git merge upstream/main -m "🔄 Manual merge updates from upstream"

    # 推送更新到当前仓库
    - name: 🔄 Push Updates to My Repository
      env:
        TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: |
        git push origin main
