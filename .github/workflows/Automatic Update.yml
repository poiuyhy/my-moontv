name: 🔄 Daily Repository Update

on:
  schedule:
    # 每天 UTC 时间 10:00 运行
    - cron: '0 10 * * *'

jobs:
  update-repo:
    runs-on: ubuntu-latest

    steps:
    # 检出当前仓库代码
    - name: 🔄 Checkout My Repository
      uses: actions/checkout@v3

    # 添加目标仓库为远程仓库
    - name: 🔄 Add Target Repository as Remote
      run: |
        git remote add upstream https://github.com/samqin123/MoonTV.git
        git fetch upstream
        git merge upstream/main -m "🔄 Auto-merge updates from upstream"

    # 推送更新到当前仓库
    - name: 🔄 Push Updates to My Repository
      env:
        TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: |
        git push origin main
