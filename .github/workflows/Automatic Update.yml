name: 每日更新

on:
  schedule:
    - cron: "0 10 * * *" # 每天10点（UTC时间）触发
  workflow_dispatch: # 手动触发选项

jobs:
  update-repo:
    runs-on: ubuntu-latest
    steps:
      - name: 🚀 检出当前仓库
        uses: actions/checkout@v3

      - name: 🔄 添加原始仓库为远程
        run: git remote add upstream https://github.com/samqin123/MoonTV.git

      - name: 🔄 拉取原始仓库的更新
        run: git fetch upstream

      - name: 🔄 合并原始仓库的更改
        run: git merge upstream/main --allow-unrelated-histories -m "🔄 每日自动同步更新"

      - name: 🚀 推送更改到复刻仓库
        run: git push origin main
